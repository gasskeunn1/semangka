<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Vidio DRM Player</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.6/shaka-player.compiled.min.js"></script>
  <style>
    body {
      background: #000;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      color: white;
      font-family: sans-serif;
    }
    video {
      width: 80%;
      max-width: 960px;
      height: auto;
      background: black;
    }
  </style>
</head>
<body>
  <h2>Streaming Vidio (Widevine)</h2>
  <video id="video" controls autoplay></video>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      if (shaka.Player.isBrowserSupported()) {
        initPlayer();
      } else {
        console.error('Browser tidak mendukung Shaka Player');
      }
    });

    async function initPlayer() {
      const video = document.getElementById('video');
      const player = new shaka.Player(video);

      // Log error
      player.addEventListener('error', e => console.error('Error Shaka:', e));

      // Konfigurasi DRM Widevine
      player.configure({
        drm: {
          servers: {
            'com.widevine.alpha': 'https://license.vidio.com/ri/licenseManager.do?hdnts=exp=1754945962~acl=/stream/6786/file/*~id=183740554~hmac=395bbb13f3fbe7e550eedbe702d08ffd837159e3723b67cc825a0eb2da2f8de4'
          }
        }
      });

      try {
        await player.load('https://geo-id-tl-gg-etslive-v3-vidio-com-tokenized.akamaized.net/stream/6786/file/drm/dash/6786_stream.mpd?hdnts=exp=1754945962~acl=/stream/6786/file/*~id=183740554~hmac=395bbb13f3fbe7e550eedbe702d08ffd837159e3723b67cc825a0eb2da2f8de4');
        console.log('Stream dimuat!');
      } catch (err) {
        console.error('Gagal memuat stream:', err);
      }
    }
  </script>
</body>
</html>
